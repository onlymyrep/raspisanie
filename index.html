<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Расписание сотрудников</title>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #2b2b2b;
            color: #d3c1b2;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            max-width: 800px;
            width: 100%;
            padding: 20px;
            background-color: #3a3a3a;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            table-layout: fixed; /* Фиксированная ширина таблицы */
        }

        th, td {
            border: 1px solid #555;
            padding: 12px;
            text-align: left;
        }

        th {
            background-color: #4a3f35;
        }

        input, select {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            background-color: #3a3a3a;
            color: #d3c1b2;
            border: 1px solid #555;
            border-radius: 4px;
            box-sizing: border-box;
        }

        input:focus, select:focus {
            border-color: #8b735b;
            outline: none;
        }

        /* Фиксированная ширина для ячеек времени */
        td:nth-child(3),
        td:nth-child(4) {
            width: 120px; /* Ширина ячеек времени */
        }

        button {
            padding: 10px 20px;
            cursor: pointer;
            background-color: #5d4a3e;
            color: #d3c1b2;
            border: none;
            border-radius: 4px;
            transition: background-color 0.3s;
            width: 100%;
        }

        button:hover {
            background-color: #8b735b;
        }

        @media (max-width: 600px) {
            th, td {
                padding: 8px;
            }

            .container {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>График работы сотрудников</h1>

        <table id="schedule-table">
            <thead>
                <tr>
                    <th>Имя</th>
                    <th>День недели</th>
                    <th>Время (от)</th>
                    <th>Время (до)</th>
                    <th>Статус</th>
                </tr>
            </thead>
            <tbody>
                <!-- 7 строк по умолчанию -->
                <tr>
                    <td><input type="text" class="name" placeholder="ФИО сотрудника"></td>
                    <td>Пн</td>
                    <td><input type="time" class="time-start" min="07:00" max="00:00"></td>
                    <td><input type="time" class="time-end" min="07:00" max="00:00"></td>
                    <td>
                        <select class="status">
                            <option value="Рабочий день">Рабочий день</option>
                            <option value="Выходной">Выходной</option>
                            <option value="Отпуск">Отпуск</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td><input type="text" class="name" placeholder="ФИО сотрудника"></td>
                    <td>Вт</td>
                    <td><input type="time" class="time-start" min="07:00" max="00:00"></td>
                    <td><input type="time" class="time-end" min="07:00" max="00:00"></td>
                    <td>
                        <select class="status">
                            <option value="Рабочий день">Рабочий день</option>
                            <option value="Выходной">Выходной</option>
                            <option value="Отпуск">Отпуск</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td><input type="text" class="name" placeholder="ФИО сотрудника"></td>
                    <td>Ср</td>
                    <td><input type="time" class="time-start" min="07:00" max="00:00"></td>
                    <td><input type="time" class="time-end" min="07:00" max="00:00"></td>
                    <td>
                        <select class="status">
                            <option value="Рабочий день">Рабочий день</option>
                            <option value="Выходной">Выходной</option>
                            <option value="Отпуск">Отпуск</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td><input type="text" class="name" placeholder="ФИО сотрудника"></td>
                    <td>Чт</td>
                    <td><input type="time" class="time-start" min="07:00" max="00:00"></td>
                    <td><input type="time" class="time-end" min="07:00" max="00:00"></td>
                    <td>
                        <select class="status">
                            <option value="Рабочий день">Рабочий день</option>
                            <option value="Выходной">Выходной</option>
                            <option value="Отпуск">Отпуск</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td><input type="text" class="name" placeholder="ФИО сотрудника"></td>
                    <td>Пт</td>
                    <td><input type="time" class="time-start" min="07:00" max="00:00"></td>
                    <td><input type="time" class="time-end" min="07:00" max="00:00"></td>
                    <td>
                        <select class="status">
                            <option value="Рабочий день">Рабочий день</option>
                            <option value="Выходной">Выходной</option>
                            <option value="Отпуск">Отпуск</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td><input type="text" class="name" placeholder="ФИО сотрудника"></td>
                    <td>Сб</td>
                    <td><input type="time" class="time-start" min="07:00" max="00:00"></td>
                    <td><input type="time" class="time-end" min="07:00" max="00:00"></td>
                    <td>
                        <select class="status">
                            <option value="Рабочий день">Рабочий день</option>
                            <option value="Выходной">Выходной</option>
                            <option value="Отпуск">Отпуск</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td><input type="text" class="name" placeholder="ФИО сотрудника"></td>
                    <td>Вс</td>
                    <td><input type="time" class="time-start" min="07:00" max="00:00"></td>
                    <td><input type="time" class="time-end" min="07:00" max="00:00"></td>
                    <td>
                        <select class="status">
                            <option value="Рабочий день">Рабочий день</option>
                            <option value="Выходной">Выходной</option>
                            <option value="Отпуск">Отпуск</option>
                        </select>
                    </td>
                </tr>
            </tbody>
        </table>

        <button id="submit">Отправить расписание</button>
    </div>

    <script>
        // Инициализация EmailJS
        emailjs.init('9_tMAQ1P04QhyA085'); // Ваш User ID

	        document.getElementById('submit').addEventListener('click', async () => {
	    const rows = document.querySelectorAll('#schedule-table tbody tr');
	    const data = [];

	    rows.forEach(row => {
	        const name = row.querySelector('.name').value || 'Не указано';
	        const day = row.querySelector('td:nth-child(2)').textContent;
	        const timeStart = row.querySelector('.time-start').value || 'Не указано';
	        const timeEnd = row.querySelector('.time-end').value || 'Не указано';
	        const status = row.querySelector('.status').value || 'Не указано';

	        // Если статус "Выходной" или "Отпуск", время не учитываем
	        if (status === 'Выходной' || status === 'Отпуск') {
	            data.push({ name, day, timeStart: '-', timeEnd: '-', status });
	        } else {
	            data.push({ name, day, timeStart, timeEnd, status });
	        }
	    });

	    if (data.length > 0) {
	        try {
	            // Формируем данные для отправки
	            const templateParams = {
	                to_email: 'tfgryujhgh@gmail.com', // Укажите email получателя
	                data: data // Передаем массив объектов
	            };

	            // Отправка данных через EmailJS
	            const response = await emailjs.send(
	                'service_2h0bb4p', // Ваш Service ID
	                'template_kzxu2rt', // Ваш Template ID
	                templateParams
	            );

	            if (response.status === 200) {
	                alert('Данные успешно отправлены!');
	            } else {
	                alert('Ошибка при отправке данных.');
	            }
	        } catch (error) {
	            alert('Ошибка при отправке данных.');
	            console.error('Ошибка:', error);
	        }
	    } else {
	        alert('Добавьте хотя бы одну строку!');
	    }
	});

        // Скрытие полей времени при выборе "Выходной" или "Отпуск"
        document.querySelectorAll('.status').forEach(select => {
            select.addEventListener('change', (e) => {
                const row = e.target.closest('tr');
                const timeStart = row.querySelector('.time-start');
                const timeEnd = row.querySelector('.time-end');

                if (e.target.value === 'Выходной' || e.target.value === 'Отпуск') {
                    timeStart.disabled = true;
                    timeEnd.disabled = true;
                } else {
                    timeStart.disabled = false;
                    timeEnd.disabled = false;
                }
            });
        });
    </script>
</body>
</html>
